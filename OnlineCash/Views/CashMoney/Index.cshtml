@using OnlineCash.DataBaseModels;
@model List<OnlineCash.DataBaseModels.CashMoney>

<table class="table table-sm table-bordered table-hover table-striped">
    <thead>
        <tr>
            <th>Дата</th>
            <th>Магазин</th>
            <th>Внесение</th>
            <th>Изъятие</th>
            <th>Примечание</th>
        </tr>
    </thead>
    <tbody>
        @foreach(var cashMoney in Model)
        {
            var sumIncome = cashMoney.TypeOperation == CashMoneyTypeOperations.Income ? cashMoney.Sum : 0;
            var sumOutcome = cashMoney.TypeOperation == CashMoneyTypeOperations.Outcome ? cashMoney.Sum : 0;
            <tr>
                <td>@cashMoney.Create.ToString("dd.MM.yy HH:mm")</td>
                <td>@cashMoney.Shop?.Name</td>
                <td>@sumIncome</td>
                <td>@sumOutcome</td>
                <td>@cashMoney.Note</td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <th colspan="2">Итого</th>
            <th>@Model.Where(c => c.TypeOperation == CashMoneyTypeOperations.Income).Sum(c => c.Sum)</th>
            <th>@Model.Where(c => c.TypeOperation == CashMoneyTypeOperations.Outcome).Sum(c => c.Sum)</th>
            <th></th>
        </tr>
    </tfoot>
</table>
